<html>
    <head>
        <title>{{ title }} Sentiment Analysis</title>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
        <link rel="stylesheet" type="text/css" href="style.css">
        <img src="https://editor.analyticsvidhya.com/uploads/50131cover.jpg" alt="Girl in a jacket" style="width:auto;height:200px;display: block;margin-left: auto ;margin-right: auto;">
    </head>
    <body>
        <h1>Welcome To Sentiment Analyzer</h1>
        <form method="POST">
            <textarea name="text1" id="my_field1" class="output" placeholder="Say Something: ...." rows="10" cols="60"></textarea><br><br>

            <!--<a class="btn btn-1" onclick="change1()" >ðŸŽ™ Speak Now</a>
            <a class="btn btn-2"onclick="change2()">STOP</a>-->
            <a class="btn btn-1"  >ðŸŽ™ English</a>
            <a class="btn btn-2" >Japanese</a>
            <a class="btn btn-stop" >STOP</a>
            <input class="example_a" type="submit">

        </form>
        {% if final %}
        <div>
            <h2>The Sentiment of</h2> '{{ text1 }}' <h2>is {{ final }}% positive !</h2>
            {% else %}
            <p></p>
            {% endif %}
        </div>
        {{ k | safe }}
        <span>Demo for Anh Tuáº¥n. :D</span>
    </body>
    <img src="https://www.marscrowd.com/wp-content/uploads/2021/09/sentiment-analysis-banner-img.svg" alt="Girl in a jacket" style="width:auto;height:500px;display: block;margin-left: auto ;margin-right: auto;">

    <script>
        
        //function change1(){
        //    var recognition = new webkitSpeechRecognition();
        //    recognition.lang = "en-GB";

        //    recognition.onresult = function(event) {
                // console.log(event);
        //        document.getElementById('my_field1').value = event.results[0][0].transcript;
        //    }
        //    recognition.start();
        //    console.log("recording...")
        //}
        //function change2(){
        //    recognition.stop()
        //    console.log("recording...")
        //}

        class SpeechRecognitionApi{
            constructor(options) {
                const SpeechToText = window.speechRecognition || window.webkitSpeechRecognition;
                this.speechApi = new SpeechToText();
                this.speechApi.continuous = true;
                this.speechApi.interimResults = false;
                this.output = options.output ? options.output : document.createElement('div');
                console.log(this.output)
                this.speechApi.onresult = (event)=> { 
                    console.log(event);
                    var resultIndex = event.resultIndex;
                    var transcript = event.results[resultIndex][0].transcript;

                    console.log('transcript>>', transcript);
                    console.log(this.output)
                    this.output.textContent = transcript;

                    
                }
            }
            init(){
                this.speechApi.start();
            }
            stop(){
                this.speechApi.stop();
            }
        }

        window.onload = function(){
            var speech = new SpeechRecognitionApi({
                output: document.querySelector('.output') 
            })

            document.querySelector('.btn-1').addEventListener('click', function () {
                speech.init();
                //lan1 = 'en-US';
                //recognition.lang = 'en-US';
            })
            document.querySelector('.btn-2').addEventListener('click', function () {
                speech.init()
                //lan1 = 'vi-VN';
                //recognition.lang = 'vi-VN';
                
            })

            document.querySelector('.btn-stop').addEventListener('click', function () {
                speech.stop()
            })

        }
    </script>
</html>
